{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "AStock Pipeline Config",
  "type": "object",
  "required": ["pipeline"],
  "properties": {
    "pipeline": {
      "type": "object",
      "required": ["steps"],
      "properties": {
        "steps": {
          "type": "array",
            "items": {
              "type": "object",
              "required": ["name", "component", "engine", "method"],
              "properties": {
                "name": {"type": "string", "minLength": 1},
                "component": {"type": "string", "minLength": 1},
                "engine": {"type": "string", "minLength": 1},
                "method": {"oneOf": [
                  {"type": "string", "minLength": 1},
                  {"type": "array", "items": {"type": "string", "minLength": 1}, "minItems": 1}
                ]},
                "parameters": {"type": ["object", "null"]},
                "arguments": {"type": ["object", "null"]},
                "outputs": {"type": ["object", "null"]}
              }
            }
        },
        "orchestration": {"type": "object", "properties": {
          "granularity": {"enum": ["pipeline", "node"]},
          "soft_fail": {"type": ["boolean", "object"]}
        }},
        "kedro_pipelines": {"type": ["object", "null"]}
      }
    }
  }
}
